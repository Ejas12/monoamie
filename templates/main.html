<!doctype html>
<html lang="en">
        <head>
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
                <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
                <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
           
           
           
                {% if title %}
            <title>{{ title }} - Monoamie</title>
            {% else %}
            <title>Monoamie</title>
            {% endif %}
        </head>
        <body>
                <div class="container">
                <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
                  <a class="navbar-brand" href="#">Monoamie</a>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
            
                  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                    <ul class="navbar-nav mr-auto">
                      <li class="nav-item active">
                        <img src="/static/images/monoamie.png"></span></a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('login') }}">Login</a>
                      </li>

                      <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Reportes</a>
                        <div class="dropdown-menu" aria-labelledby="dropdown01">
                          <a class="dropdown-item" href="{{ url_for('reporteNinosMatriculados') }}"> Reporte Ninos matriculado </a>
                          <a class="dropdown-item" href="{{ url_for('reportelistas') }}">Listas de Clases</a>
                          <a class="dropdown-item" href="{{ url_for('reporteNOatriculados') }}">Reporte Ninos No matriculados</a>

                          
                        </div>
                      </li>
                    </ul>
                    <form class="form-inline my-2 my-lg-0">
                      <button class="btn btn-outline-success my-2 my-sm-0" type="submit" href="#" id ="export" role='button'>Exportar</button>
                    </form>
                  </div>
                </nav>
                <script type='text/javascript' src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
                <!-- If you want to use jquery 2+: https://code.jquery.com/jquery-2.1.0.min.js -->
                <script type='text/javascript'>
                $(document).ready(function () {
        
                    console.log("HELLO")
                    function exportTableToCSV($table, filename) {
                        var $headers = $table.find('tr:has(th)')
                            ,$rows = $table.find('tr:has(td)')
        
                            // Temporary delimiter characters unlikely to be typed by keyboard
                            // This is to avoid accidentally splitting the actual contents
                            ,tmpColDelim = String.fromCharCode(11) // vertical tab character
                            ,tmpRowDelim = String.fromCharCode(0) // null character
        
                            // actual delimiter characters for CSV format
                            ,colDelim = '","'
                            ,rowDelim = '"\r\n"';
        
                            // Grab text from table into CSV formatted string
                            var csv = '"';
                            csv += formatRows($headers.map(grabRow));
                            csv += rowDelim;
                            csv += formatRows($rows.map(grabRow)) + '"';
        
                            // Data URI
                            var csvData = 'data:application/csv;charset=utf-8,' + encodeURIComponent(csv);
        
                        // For IE (tested 10+)
                        if (window.navigator.msSaveOrOpenBlob) {
                            var blob = new Blob([decodeURIComponent(encodeURI(csv))], {
                                type: "text/csv;charset=utf-8;"
                            });
                            navigator.msSaveBlob(blob, filename);
                        } else {
                            $(this)
                                .attr({
                                    'download': filename
                                    ,'href': csvData
                                    //,'target' : '_blank' //if you want it to open in a new window
                            });
                        }
        
                        //------------------------------------------------------------
                        // Helper Functions 
                        //------------------------------------------------------------
                        // Format the output so it has the appropriate delimiters
                        function formatRows(rows){
                            return rows.get().join(tmpRowDelim)
                                .split(tmpRowDelim).join(rowDelim)
                                .split(tmpColDelim).join(colDelim);
                        }
                        // Grab and format a row from the table
                        function grabRow(i,row){
                             
                            var $row = $(row);
                            //for some reason $cols = $row.find('td') || $row.find('th') won't work...
                            var $cols = $row.find('td'); 
                            if(!$cols.length) $cols = $row.find('th');  
        
                            return $cols.map(grabCol)
                                        .get().join(tmpColDelim);
                        }
                        // Grab and format a column from the table 
                        function grabCol(j,col){
                            var $col = $(col),
                                $text = $col.text();
        
                            return $text.replace('"', '""'); // escape double quotes
        
                        }
                    }
        
        
                    // This must be a hyperlink
                    $("#export").click(function (event) {
                        // var outputFile = 'export'
                        var outputFile = window.prompt("What do you want to name your output file (Note: This won't have any effect on Safari)") || 'export';
                        outputFile = outputFile.replace('.csv','') + '.csv'
                         
                        // CSV
                        exportTableToCSV.apply(this, [$('#dvData > table'), outputFile]);
                        
                        // IF CSV, don't do event.preventDefault() or return false
                        // We actually need this to be a typical hyperlink
                    });
                });
            </script>
  
       
       
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <ul>
                {% for message in messages %}
                <li>{{ message }}</li>
                {% endfor %}
            </ul>
            {% endif %}
            {% endwith %}
            {% block content %}{% endblock %}
        </body>

    </html>